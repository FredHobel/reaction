todo:
 add manual random gen fall back